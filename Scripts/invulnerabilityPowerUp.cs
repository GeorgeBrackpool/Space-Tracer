using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class invulnerabilityPowerUp : MonoBehaviour
{
  //public GameObject pickupEffect;
    //public float multiplier = 1.4f;
    FingerMovement playerInvuln;
    public float duration = 2f;
    Rigidbody2D invulnRB;
    public int invulnBuff = 999999;
    bool isInvincible;

    GameSession gameSession;
   public void OnTriggerEnter2D(Collider2D other) 
    {
      if (other.CompareTag("Player"))
      {
       
        StartCoroutine(Pickup(other)); 
         
        
      }
  }
  IEnumerator Pickup(Collider2D player)
  {   
    FindObjectOfType<GameSession>().powerupCounter++;
      //Instantiate(pickupEffect, transform.position, transform.rotation);//vfx
    //Disable the power up renderer and collider
    FingerMovement playerInvuln = player.GetComponent<FingerMovement>();
    invulnRB=GetComponent<Rigidbody2D>();
    
    isInvincible = true;
    if (isInvincible == true){
      playerInvuln.health =+ invulnBuff;
    }
    invulnRB.constraints = RigidbodyConstraints2D.FreezePositionY;
    
    GetComponent<SpriteRenderer>().enabled = false;
    GetComponent<BoxCollider2D>().enabled = false;
     yield return new WaitForSeconds(duration);
    
      isInvincible = false;
       playerInvuln.health = 250;
      
      Destroy(gameObject);
    }
       
}    
  


